---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# VISCtemplates

The goal of VISCtemplates is to: 

* automate project setup
* provide a common, easy-to-understand directory structure across analyses 
* provide consistency across VISC reports

## Installation

The package is available on the Fred Hutch organization GitHub page.

```{r eval=FALSE}
remotes::install_github("FredHutch/VISCtemplates")

# install the package with vignettes:
remotes::install_github("FredHutch/VISCtemplates", build_vignettes = TRUE)
```

## Requirements

* R (version >= 3.0)
* RStudio (version >= 1.2)
    + Includes Pandoc (version >= 2.0), which is needed for Word reports.
* TinyTeX (or MiKTeX), which is needed for PDF reports.
    + `install.packages(“tinytex”)`
    + `tinytex::install_tinytex()`

## Vignettes

The package vignettes will guide you through setting up an analysis project 
with VISCtemplates and [usethis](https://github.com/r-lib/usethis) and 
using a VISC report template.

```{r eval=FALSE}
vignette("using_pdf_and_word_template")
vignette("create_a_visc_analysis_project")
```

## Usage

Many of the functions in this package build on functions from [usethis](https://github.com/r-lib/usethis) and 
[rmarkdown](https://github.com/rstudio/rmarkdown).
Like usethis, most `use_*()` functions operate on the active project. 
VISCtemplates is designed to be used interactively. 

The main functions in VISCtemplates are `create_visc_project()`,
for setting up analysis projects, and 
`use_visc_report()`, for using VISC report templates.
Take a look at the package vignettes for more details.

Create an analysis project:

```{r eval=FALSE}
path <- "~/mydir/VDCnnnAnalysis"

create_visc_project(path)
```

Use a VISC Report:

```{r eval=FALSE}
use_visc_report(
  report_name = "VDCnnn_BAMA_PT_Report_statusifapplicable", # the name of the report file
  path = "BAMA", # the path within the active directory, usually the name of the assay
  report_type = "bama" # "empty", "generic", or "bama" 
)
```

## Why use an R package structure?

The R package structure is used for analysis projects because it provides an easily recognizable format for file organization and allows for the use of packages like devtools and roxygen2. For more information, see:

1. Ben Marwick, Carl Boettiger, and Lincoln Mullen. Paper: [Packaging data analytical work reproducibily using R (and friends)](https://peerj.com/preprints/3192/)
2. Karthik Ram. Rstudio::conf 2019 talk: [How To Make Your Data Analysis Notebooks More Reproducible](https://github.com/karthik/rstudio2019)
3. rOpenSci Community Call: [Reproducible Research with R](https://ropensci.org/commcalls/2019-07-30/)

## Notes on how to create a new template

* To make new template, in R folder call template_R and function use_visc_report, so then add new report type. Function creates rmd and looks for methods files. Same thing for use_visc_methods. Saves stat methods, lab methods, biological endpoints files.

* Add template language in inst/templates. Create methods-ics and make the 3 methods rmds (copy bama into new folder called methods-ics) and this is new template.

* Modify each rmd to include template language. Html comments are not printed. Look at comments to try to follow the style and organization. E.g., enter information by [], helpful comments in html comments.

* Made line breaks so the line doesn't go off the screen, has some guidance as to how and why. Every sentence gets a new line, and if it's more than 80 char width you break it down further. Make breaks where there are commas or where sentence broken in natural way.

* Package maintainer guidelines describes creating a release.
Workflow is based on Gitflow. Main branch always has reviewed and current release of package. Create devel branch, which is working branch for package. Anytime you want a new feature, you branch off devel and then merge into devel. This helps manage multiple development features. Once devel is ready for next release, then release branch gets created from devel and last minute changes or changes happen on release branch. Once that's finished, release branch gets merged to main branch and then back to devel. Release branch - write news.md, test everything, update vignettes or README
